(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{336:(e,t,r)=>{Promise.resolve().then(r.bind(r,5399))},5399:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(5155),a=r(2115),n=r(6046),o=r(5007),i=r(3196),l=r(5096),c=r(4505),d=r(9134);function u(){var e;let{user:t,loading:r}=(0,i.Z)(),[u,p]=(0,a.useState)(null),[h,m]=(0,a.useState)(!0),f=(0,n.useRouter)(),{toast:E}=(0,d.dj)();return((0,a.useEffect)(()=>{(async()=>{if(!r&&!t){f.push("/login");return}if(t)try{let e=await (0,l.w)(t.uid);p(e)}catch(e){console.error("Error loading user profile:",e),E({title:"Error",description:"Failed to load user profile. Please try logging in again.",variant:"destructive"}),f.push("/login")}finally{m(!1)}})()},[t,r,f,E]),h||r)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)(c.A,{className:"h-8 w-8 animate-spin"})}):u?(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold mb-8",children:["Welcome, ",u.firstName,"!"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)(o.Zp,{children:[(0,s.jsx)(o.aR,{children:(0,s.jsx)(o.ZB,{children:"Total Distance"})}),(0,s.jsx)(o.Wu,{children:(0,s.jsxs)("p",{className:"text-3xl font-bold",children:[(null===(e=u.totalDistance)||void 0===e?void 0:e.toFixed(1))||"0"," km"]})})]}),(0,s.jsxs)(o.Zp,{children:[(0,s.jsx)(o.aR,{children:(0,s.jsx)(o.ZB,{children:"Prayers Shared"})}),(0,s.jsx)(o.Wu,{children:(0,s.jsx)("p",{className:"text-3xl font-bold",children:u.totalPrayers||0})})]}),(0,s.jsxs)(o.Zp,{children:[(0,s.jsx)(o.aR,{children:(0,s.jsx)(o.ZB,{children:"Member Since"})}),(0,s.jsx)(o.Wu,{children:(0,s.jsx)("p",{className:"text-3xl font-bold",children:new Date(u.createdAt).toLocaleDateString()})})]})]})]}):null}},3196:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>l,Z:()=>c});var s=r(5155),a=r(2115),n=r(4565),o=r(9891);let i=(0,a.createContext)({user:null,loading:!0});function l(e){let{children:t}=e,[r,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{var e;let t=(e=e=>{l(e),d(!1)},(0,n.hg)(o.j,e));return()=>t()},[]),(0,s.jsx)(i.Provider,{value:{user:r,loading:c},children:t})}function c(){return(0,a.useContext)(i)}},5007:(e,t,r)=>{"use strict";r.d(t,{BT:()=>i,Wu:()=>l,ZB:()=>o,Zp:()=>a,aR:()=>n});var s=r(5155);r(2115);let a=e=>{let{children:t,className:r,...a}=e;return(0,s.jsx)("div",{className:"rounded-md border shadow-sm ".concat(r),...a,children:t})},n=e=>{let{children:t,className:r,...a}=e;return(0,s.jsx)("div",{className:"px-4 py-3 border-b font-semibold ".concat(r),...a,children:t})},o=e=>{let{className:t,...r}=e;return(0,s.jsx)("h3",{className:"text-lg font-semibold ".concat(t),...r})},i=e=>{let{className:t,...r}=e;return(0,s.jsx)("p",{className:"text-sm text-muted-foreground ".concat(t),...r})},l=e=>{let{children:t,className:r,...a}=e;return(0,s.jsx)("div",{className:"p-4 ".concat(r),...a,children:t})}},9134:(e,t,r)=>{"use strict";r.d(t,{dj:()=>p});var s=r(2115);let a=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=i(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_VALUE).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function p(){let[e,t]=s.useState(c);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},5096:(e,t,r)=>{"use strict";r.d(t,{k:()=>o,w:()=>n});var s=r(7058),a=r(9891);async function n(e){try{if(!e)throw Error("User ID is required");let t=(0,s.rJ)(a.db,"users"),r=(0,s.P)(t,(0,s._M)("uid","==",e)),n=await (0,s.GG)(r);if(n.empty)return null;let o=n.docs[0],i=o.data();return{id:o.id,...i,createdAt:i.createdAt.toDate()}}catch(e){if(console.error("Error getting user:",e),e instanceof Error)throw Error(e.message);throw Error("Failed to get user profile")}}async function o(e){try{if(await n(e.uid))throw Error("User profile already exists");let t={...e,totalDistance:0,totalPrayers:0,createdAt:s.Dc.now()};return{id:(await (0,s.gS)((0,s.rJ)(a.db,"users"),t)).id,...t,createdAt:new Date}}catch(e){if(console.error("Error creating user:",e),e instanceof Error)throw Error(e.message);throw Error("Failed to create user profile")}}},9911:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});var s=r(2818);let a={apiKey:"AIzaSyCopx5Hk7QK3JkyrVU9IWYJuERPn7vH43E",authDomain:"kingdomrunnersdv1.firebaseapp.com",projectId:"kingdomrunnersdv1",storageBucket:"kingdomrunnersdv1.firebasestorage.app",messagingSenderId:"626559745548",appId:"1:626559745548:web:3e2f5d7498f7e3beb1f829",measurementId:"G-0G8N8DZWHW"},n={apiKey:s.env.NEXT_PUBLIC_FIREBASE_API_KEY||a.apiKey,authDomain:s.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||a.authDomain,projectId:s.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||a.projectId,storageBucket:s.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||a.storageBucket,messagingSenderId:s.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||a.messagingSenderId,appId:s.env.NEXT_PUBLIC_FIREBASE_APP_ID||a.appId,measurementId:s.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||a.measurementId}},9891:(e,t,r)=>{"use strict";r.d(t,{db:()=>d,j:()=>c,storage:()=>u,y:()=>l});var s=r(9904),a=r(7058),n=r(4565),o=r(333),i=r(9911);let l=0===(0,s.Dk)().length?(0,s.Wp)(i.C):(0,s.Dk)()[0],c=(0,n.xI)(l),d=(0,a.aU)(l),u=(0,o.c7)(l);(0,n.oM)(c,n.F0).catch(e=>{console.error("Error setting auth persistence:",e)}),(0,a.ol)(d).catch(e=>{"failed-precondition"===e.code?console.warn("Multiple tabs open, persistence enabled in first tab only"):"unimplemented"===e.code&&console.warn("Browser does not support persistence")})},7401:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(2115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...p}=e;return(0,s.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:r,strokeWidth:l?24*Number(i)/Number(a):i,className:n("lucide",c),...p},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let r=(0,s.forwardRef)((r,o)=>{let{className:l,...c}=r;return(0,s.createElement)(i,{ref:o,iconNode:t,className:n("lucide-".concat(a(e)),l),...c})});return r.displayName="".concat(e),r}},4505:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7401).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6046:(e,t,r)=>{"use strict";var s=r(6658);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[992,794,575,441,517,358],()=>t(336)),_N_E=e.O()}]);